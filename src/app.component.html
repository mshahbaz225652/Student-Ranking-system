<main class="container mx-auto p-4 md:p-8">
  <header class="text-center mb-8">
    <h1 class="text-4xl md:text-5xl font-bold text-cyan-400">
      ðŸŽ“ Student Marks Ranking System
    </h1>
    <p class="text-slate-400 mt-2">A DAA Project for Sorting Algorithm Analysis</p>
  </header>

  <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
    <!-- Left Column: Controls and Data Entry -->
    <div class="lg:col-span-2 space-y-8">
      <app-student-form (addStudent)="handleAddStudent($event)" />

      <!-- Control Panel Card -->
      <div class="bg-slate-800 rounded-lg shadow-lg p-6 sticky top-8">
        <h2 class="text-2xl font-bold mb-4 text-cyan-400"><i class="fas fa-cogs mr-2"></i>Controls</h2>
        <div class="space-y-4">
          <div>
            <label for="algorithm" class="block text-sm font-medium text-slate-300">Select Sorting Algorithm</label>
            <select id="algorithm" [(ngModel)]="selectedAlgorithm" (ngModelChange)="clearResults()" class="mt-1 block w-full bg-slate-700 border border-slate-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-cyan-500 focus:border-cyan-500 text-white">
              @for(algo of availableAlgorithms; track algo.key) {
                <option [value]="algo.key">{{ algo.name }}</option>
              }
            </select>
          </div>

          <button (click)="sort()" [disabled]="isSorting() || students().length === 0" class="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 focus:ring-offset-slate-800 disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center">
            @if (isSorting()) {
              <i class="fas fa-spinner fa-spin mr-2"></i>
              <span>Sorting...</span>
            } @else {
              <i class="fas fa-sort-amount-down mr-2"></i>
              <span>Sort & Rank Students</span>
            }
          </button>

          <div class="flex space-x-4">
            <button (click)="clearResults()" class="w-full bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-700 transition-colors">
              <i class="fas fa-eraser mr-2"></i>Clear Results
            </button>
            <button (click)="resetData()" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition-colors">
              <i class="fas fa-trash-alt mr-2"></i>Reset All
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Results and Analysis -->
    <div class="lg:col-span-3 space-y-8">
      @if(rankedStudents().length > 0) {
        <app-student-table [students]="rankedStudents()" (deleteStudent)="handleDeleteStudent($event)" />
      } @else if (students().length > 0) {
         <div class="bg-slate-800 rounded-lg shadow-lg p-6 min-h-[300px] flex flex-col items-center justify-center">
           <i class="fas fa-list-ol text-5xl text-cyan-500 mb-4"></i>
           <h3 class="text-2xl font-bold text-slate-200">{{ students().length }} student(s) ready to be ranked.</h3>
           <p class="text-slate-400 mt-2">Select an algorithm and click "Sort & Rank Students" to see the results.</p>
         </div>
      } @else {
        <div class="bg-slate-800 rounded-lg shadow-lg p-6 min-h-[300px] flex flex-col items-center justify-center">
           <i class="fas fa-user-graduate text-5xl text-cyan-500 mb-4"></i>
           <h3 class="text-2xl font-bold text-slate-200">No Student Data</h3>
           <p class="text-slate-400 mt-2">Use the 'Add Student' form to begin.</p>
         </div>
      }
      
      <app-performance-table [stats]="performanceStats()" />

      <app-algorithm-explanation [algorithmKey]="selectedAlgorithm()" />
    </div>
  </div>
</main>
